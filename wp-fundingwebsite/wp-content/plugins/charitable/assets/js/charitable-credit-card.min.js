/*!  1.6.14 2019-04-04 22:05 */

CHARITABLE=window.CHARITABLE||{},function(e){var o="",t=function(e){var t=e.target.value,r=/^3(4|7)/.test(t),n=r?17:19,a=this.selectionStart,i="";t.split("").forEach(function(e){var t=i.length;if(r)if(4!==t&&11!==t||" "===e){if(4!==t&&11!==t&&" "===e)return}else i+=" ",a===t+1&&a++;else if((t+1)%5==0&&" "!==e)i+=" ",a===t+1&&a++;else if((t+1)%5!=0&&" "===e)return;i+=e}),/[^\d^\s]/.test(t)||t.length>n?(e.target.value=o,this.setSelectionRange(a-1,a-1)):(o=e.target.value=i,this.setSelectionRange(a,a))};CHARITABLE.Donation_Form.prototype.is_valid_card_number=function(){var i;return(i=[0,2,4,6,8,1,3,5,7,9],function(e){for(var t,r=e.length,n=1,a=0;r;)t=parseInt(e.charAt(--r),10),a+=(n^=1)?i[t]:t;return a&&0==a%10})(this.get_cc_number().replace(/ /g,""))},CHARITABLE.Donation_Form.prototype.validate_card_number=function(){return 0===e("#charitable-gateway-fields-"+this.get_payment_method()+" #charitable_field_cc_number").length||(!1!==this.is_valid_card_number()||(this.add_error(CHARITABLE_VARS.error_invalid_cc_number),!1))};var r=e("body");r.on("charitable:form:initialize",function(){r.on("input",'input[name="cc_number"]',t)}),r.on("charitable:form:validate",function(e,t){t.validate_card_number()})}(jQuery);